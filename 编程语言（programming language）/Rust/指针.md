### Rust 引用 和 指针

```rust
use std::mem::size_of;

static B: [u8; 10] = [99, 97, 114, 114, 121, 116, 111, 119, 101, 108];
static C: [u8; 11] = [116, 104, 97, 110, 107, 115, 102, 105, 115, 104, 0];

fn main() {
    let a: usize = 42;
    let b = Box::new(B);
    let c = &C;

    // {:p} 有两个意思 -> 1. 表示打印的是指针 2. 表示打印地址
    // println!("a: {}, b: {:p}, c: {:p}", a, b, c);

    println!("a (unsigned 整数):");
    println!(" 地址: {:p}", &a);
    println!(" 大小: {:?} bytes", size_of::<usize>());
    println!(" 值:   {:?}\n", a);

    println!("b (B 装在 Box 里):");
    println!(" 地址: {:p}", &b);
    println!(" 大小: {:?} bytes", size_of::<Box<[u8]>>());
    println!(" 值:   {:p}\n", b);

    println!("B (10 bytes 的数组):");
    println!(" 地址: {:p}", &B);
    println!(" 大小: {:?} bytes", size_of::<Box<[u8]>>());
    println!(" 值:   {:?}\n", B);

    println!("c (C 的引用):");
    println!(" 地址: {:p}", &c);
    println!(" 大小: {:?} bytes", size_of::<&[u8; 11]>());
    println!(" 值:   {:p}\n", c);

    println!("C (11 bytes 的数字):");
    println!(" 地址: {:p}", &C);
    println!(" 大小: {:?} bytes", size_of::<&[u8; 11]>());
    println!(" 值:   {:?}\n", C);
}

// a (unsigned 整数):
//  地址: 0x8309d4efb8
//  大小: 8 bytes
//  值:   42

// b (B 装在 Box 里):
//  地址: 0x8309d4efc0
//  大小: 16 bytes
//  值:   0x1e2768e4a50

// B (10 bytes 的数组):
//  地址: 0x7ff73778f390
//  大小: 16 bytes
//  值:   [99, 97, 114, 114, 121, 116, 111, 119, 101, 108]

// c (C 的引用):
//  地址: 0x8309d4efd8
//  大小: 8 bytes
//  值:   0x7ff73778f39a

// C (11 bytes 的数字):
//  地址: 0x7ff73778f39a
//  大小: 8 bytes
//  值:   [116, 104, 97, 110, 107, 115, 102, 105, 115, 104, 0]
```



### 原始指针

```rust
use std::{borrow::Cow, ffi::CStr, os::raw::c_char};

static B: [u8; 10] = [99, 97, 114, 114, 121, 116, 111, 119, 101, 108];
static C: [u8; 11] = [116, 104, 97, 110, 107, 115, 102, 105, 115, 104, 0];

fn main() {
    let a: usize = 42;
    let b: String;
    let c: Cow<str>;
    
    unsafe {
        let b_ptr = &B as *const u8 as *mut u8;
        b = String::from_raw_parts(b_ptr, 10, 10);

        let c_ptr = &C as *const u8 as *const c_char;
        c = CStr::from_ptr(c_ptr).to_string_lossy();
    }
    
    println!("a: {}, b: {}, c: {}", a, b, c);
}

// a: 42, b: carrytowel, c: thanksfish
```


